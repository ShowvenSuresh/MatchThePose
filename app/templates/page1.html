<!DOCTYPE html>
<html lang="en">

<head>
  <title>PoseMatcher</title>
  <link rel="stylesheet" href="../static/styles/styles.css">
</head>

<body>
  <!-- èƒŒæ™¯éŸ³ä¹ -->
  <audio id="bgMusic" loop>
    <source src="../../assets/music/Wii.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- ç‚¹å‡»éŸ³æ•ˆ -->
  <audio id="clickSound">
    <source src="../../assets/music/btn.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- éŸ³ä¹åˆ‡æ¢æŒ‰é’® -->
  <button id="musicToggle" class="music-btn">ðŸŽµ Play Music</button>

  <!-- é¡µé¢ä¸»å†…å®¹ -->
  <div class="start-container">
    <div class="Title">
      <h1 class="title">Pose Matcher</h1>
    </div>
    <div class="strBtn">
      <button id="startBtn">Start</button>
    </div>
  </div>

  <!-- è„šæœ¬é€»è¾‘ -->
  <script>
    const bgMusic = document.getElementById("bgMusic");
    const clickSound = document.getElementById("clickSound");
    const startBtn = document.getElementById("startBtn");
    const musicToggle = document.getElementById("musicToggle");

    let isPlaying = false;

    // è‡ªåŠ¨æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼ˆè‹¥å¤±è´¥ï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡» Startï¼‰
    window.addEventListener("DOMContentLoaded", () => {
      bgMusic.play().then(() => {
        isPlaying = true;
        musicToggle.textContent = "â¸ Pause Music";
      }).catch(err => {
        console.warn("Autoplay might be blocked:", err);
        startBtn.addEventListener("click", () => {
          bgMusic.play();
        }, {once: true});
      });
    });

    musicToggle.addEventListener("click", () => {
      if (isPlaying) {
        bgMusic.pause();
        musicToggle.textContent = "ðŸŽµ Play Music";
      } else {
        bgMusic.play();
        musicToggle.textContent = "â¸ Pause Music";
      }
      isPlaying = !isPlaying;
    });

    startBtn.addEventListener("click", () => {
      clickSound.currentTime = 0;
      clickSound.play().then(() => {
        setTimeout(() => {
          window.location.href = "/game";
        }, 700);
      }).catch(() => {
        window.location.href = "/game";
      });
    });
  </script>
</body>

</html>
